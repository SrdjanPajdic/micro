!function(e,t){function n(t){return o=this,o.props=t,o.events=new n.Pubsub,o.router=new n.Router(o.props.routes,o.events),o.tpl=new n.Tpl(o.props.options,o.events),o.urlPath=e.location.pathname,o.BreakException={},o.setListeners(),o.events.subscribe("routechange",function(e){o.tpl.loadTpl(e),o.tpl.props.listeners={rendered:function(){o.setListeners()}}}),e.onpopstate=o.router.invoke,o.router.invoke(),o.setListeners(),o}var o;n.prototype={isMicro:!0,aClick:function(t){var t=e.e||t,n=t.target;if("A"==n.tagName)return t.preventDefault(),void(n.hasAttribute("href")&&o.router.path(n.getAttribute("href")))},setListeners:function(){Array.prototype.slice.call(t.querySelectorAll("[hub-link]")).forEach(function(e){e.addEventListener?e.addEventListener("click",o.aClick,!1):e.attachEvent("onclick",o.aClick)})}},"undefined"!=typeof module&&module.exports?module.exports=n:"function"==typeof define&&define.amd?define(function(){return n}):e.Micro=n}(window,document),function(){function e(){t={},n=t.hasOwnProperty}var t,n;e.prototype={subscribe:function(e,o){n.call(t,e)||(t[e]=[]);var r=t[e].push(o)-1;return{remove:function(){delete t[e][r]}}},publish:function(e,o){n.call(t,e)&&t[e].forEach(function(e){e(void 0!=o?o:{})})}},"function"==typeof Micro&&Micro.prototype.isMicro?Micro.Pubsub=e:"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):window.Pubsub=e}(),function(e,t){function n(e,t){o=this,o.props=e,o.events=t,o.BreakException={}}var o=this;n.prototype={invoke:function(e){return o.props&&o.props.forEach(function(e){o.doesMatch(e)&&(e.afterrender&&"function"==typeof e.afterrender&&e.afterrender(),o.events&&o.events.publish("routechange",e))}),o},doesMatch:function(t){var n=e.location.pathname,r=!1;if(!t.rule)return o.log(t.route+" rule has no callback"),r;var i=t.rule.split("/");i.shift();var c=n.split("/");if(c.shift(),n==t.rule&&(r=!0),i.length==c.length)for(var s=0;s<i.length;s++)0==i[s].search(":")&&(r=!0);return r},path:function(t){e.location.pathname!=t&&(history.pushState({},"",t),this.invoke())},log:function(e){console.log(e)}},"function"==typeof Micro&&Micro.prototype.isMicro?Micro.Router=n:"undefined"!=typeof module&&module.exports?module.exports=n:"function"==typeof define&&define.amd?define(function(){return n}):e.Router=n}(window,document),function(e,t){function n(e,t){o=this,o.props=e,o.container=this.props.container,o.enterAnimation=o.props.enterAnimation,o.enterAnimation&&""!=o.enterAnimation&&o.embedAnimations()}var o=this;n.prototype={tplCache:{},replaceHtml:function(e){var n="string"==typeof o.container?t.getElementById(o.container):o.container,r=n.cloneNode(!1);r.innerHTML=e,n.parentNode.replaceChild(r,n)},loadTpl:function(e){var t=this;return t.activePage=e,t.isRouteCached(e)?void t.render(this.tplCache[e.tpl]):(tplFile=this.props.tplDir+"/"+e.tpl,oReq=new XMLHttpRequest,oReq.addEventListener("load",function(){(t.props.cache||e.cache)&&t.cacheRoute(e,oReq.responseText),t.render(oReq.responseText)}),oReq.open("GET",tplFile),void oReq.send())},isRouteCached:function(e){return this.tplCache&&this.tplCache.hasOwnProperty(e.tpl)},cacheRoute:function(e,t){this.tplCache[e.tpl]=t},parseTpl:function(e,t){return e.replace(RegExp("{{\\s*([a-z0-9_][.a-z0-9_]*)\\s*}}","gi"),function(e,n){for(var o=n.split("."),r=o.length,i=t,c=0;c<r;c++)i=i[o[c]]||"";return i})},render:function(e){var t=o.activePage.data||o.props.data||{},n=this.parseTpl(e,t);this.replaceHtml(n),o.props.listeners&&setTimeout(function(){"function"==typeof o.props.listeners.rendered&&o.props.listeners.rendered()},0),this._afterrender()},_afterrender:function(){setTimeout(function(){o.enterAnimation&&(t.getElementById("container").className="animated "+o.enterAnimation)},0)},log:function(e){console.log(e)},embedAnimations:function(){var e=t.createElement("link");e.href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css",e.rel="stylesheet",t.head.appendChild(e)}},"function"==typeof Micro&&Micro.prototype.isMicro?Micro.Tpl=n:"undefined"!=typeof module&&module.exports?module.exports=n:"function"==typeof define&&define.amd?define(function(){return n}):e.Tpl=n}(window,document);